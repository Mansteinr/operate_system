{"remainingRequest":"D:\\operate_system\\node_modules\\babel-loader\\lib\\index.js!D:\\operate_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\operate_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\operate_system\\src\\components\\ServiceAnalysis.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\operate_system\\src\\components\\ServiceAnalysis.vue","mtime":1543376220535},{"path":"D:\\operate_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1542166466337},{"path":"D:\\operate_system\\node_modules\\babel-loader\\lib\\index.js","mtime":1542166452696},{"path":"D:\\operate_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1542166466337},{"path":"D:\\operate_system\\node_modules\\vue-loader\\lib\\index.js","mtime":1542166473519}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport $http from '../common/js/api';\nimport moment from 'moment';\nimport { setOtherLineData } from '../common/js/myCharts';\nimport echarts from 'echarts';\nexport default {\n  data: function data() {\n    return {\n      formInline: {\n        serviceNames: []\n      },\n      serviceName: '',\n      serviceArr: [],\n      customerArr: [],\n      flag: false,\n      minutesArr: [],\n      timeId: null,\n      m: 0\n    };\n  },\n  methods: {\n    services: function services() {\n      var _this = this;\n\n      var url = '/operation/down/queryServices';\n      $http(url, {}, 'get').then(function (res) {\n        _this.serviceArr = res.resData;\n\n        if (_this.serviceArr && _this.serviceArr.length) {\n          _this.serviceName = _this.serviceArr[0].serviceName;\n        }\n      });\n    },\n    getCoustomer: function getCoustomer(value) {\n      var loginNames = [];\n\n      if (value === 'IDNameCheck') {\n        loginNames = [\"taimiaoxinxi\", \"yunchen\", \"beidou\", \"yunfeng\", \"beikejinkong\", \"qinzhishuma\", \"test\", \"58jinrong01\", \"weiyankeji\", \"ruisai\", \"jiean\", \"chuanglan\", \"yijifu\", \"suyouda\", \"songshunxinxi\", \"lianjinsuo\", \"ruanyinantong\", \"duanhuanhuan\", \"VULOG\", \"qianbaohaoche\", \"xinqiang\", \"xinzuhui\", \"jiayinzhengxin\", \"tianqiguofu\", \"qian\", \"youzu\", \"shiyukeji\", \"hongyuan\", \"milianyunchuang\", \"ningmi\", \"yundaikeji\", \"zijin\", \"zhongjinhang\", \"shengjinnong\", \"haoxin\", \"choushane\", \"kafeijinrong\", \"panwan\", \"tianchuang1\", \"renrun\", \"tanzhishuju\", \"xinqiandai\", \"jinlianhuitong\", \"aibaojiazheng\", \"xianfengzhifu\", \"gotoway\", \"shujubao\", \"guangfubao\", \"Simon0328\", \"hongxin\", \"baiqishi\", \"chedun0820\", \"xiaoxin\", \"yishou\", \"zhonghang\", \"shoukuliandiao\", \"yucunkeji\", \"changjiezhifu\", \"shengdatest\", \"yuqiang\", \"yishouyin\", \"tongcheng\", \"beitaijinfu\", \"meituan\", \"fenmi\", \"test0826\", \"lianghaodai\", \"xiangyunteng\", \"yimei\", \"guoxinyouyi\", \"zhenge\", \"tongzheng\", \"tielong\", \"testSimon1\", \"wangtouwang\", \"dajiaying\", \"xiaoshidai\", \"shandianhebao\", \"lingxianjinrong\", \"weisudai\", \"jihuojie\", \"renrenhunlian\", \"qianbao\", \"ronghui\", \"quanmuxing\", \"testHuafu\", \"nuoya\", \"huixiangtiancheng\", \"xinhuashuju\", \"tiantianouya\", \"zishuipan\", \"lingjiang\", \"qiyidai\", \"youli2\", \"yincai\", \"test_alarm\", \"runhengfeng\", \"zhongsheng\", \"zhoushouyes\", \"xinyada\", \"zhaoweibin\", \"jiangxin\", \"shualiankeji\", \"shengdunkeji\", \"bjdingxiang\", \"tianying\", \"xiaodouding\", \"wangzhejinka\", \"shangbang\", \"huixiang\", \"xinjiyuan\", \"91zhengxin\", \"shuzun\", \"mobaikeji\", \"jixin\", \"chuanhuazhifu\", \"yibaba\", \"huafuxinxi\", \"testMoney\", \"zewei\", \"koudai\", \"wanggang\", \"puhuishuju\", \"momo\", \"shengfutong\", \"changan\", \"fenglihe\", \"nuozhengtong\", \"baishiyi\", \"wolaidai\", \"yilianyinhang\", \"bingjian\", \"yilian\", \"yishangdai\", \"zhironghui\", \"dianchou2\", \"hongshu\", \"jiupai\", \"testjd\", \"鱼耀金融\", \"jinyuntong\", \"zhongchengxin01\", \"kunying\", \"shunjingfa\", \"xianjinzhuanche\", \"zupukeji\", \"zhoubingyang\", \"bangfubao\", \"rongdou0913\", \"chengduzhidao\", \"pengju\", \"ruirongtianxia\", \"wolongdashuju\", \"tuniu\", \"moxieshuju\", \"quanbeikeji\", \"zhigu\", \"jingzhenshidai\", \"dingxiang2018\", \"jiazhengzhijia\", \"youli1\", \"qianlong\", \"yiwangxi\", \"baite\", \"yicheng\", \"yamu\", \"kaijie\", \"haier\", \"tongzhanggui\", \"handi\", \"test2\", \"jingjing\", \"youxin\", \"juheshuju0208\", \"shimingbao\", \"xinglv\", \"chengxin\", \"taida\", \"yixun2016\", \"jiuyuan\", \"qianbaojinfu\", \"zhongyanyitong\", \"kangruide\", \"chuanhuahuiyuan\", \"tuling\", \"daoshengkeji\", \"suanhua\", \"beifu\", \"junxin\", \"hefeiyuying\", \"limu\", \"hengaikeji\", \"touna\", \"chuangming\", \"tongfudun\", \"jiajiacaifu\", \"zhangpeiyus\", \"zhonghaiwai\", \"taishancaichan\", \"jinxunhechuang\", \"jinyungtong\", \"tianyi3\", \"wangrunjinfu\", \"hujinshidai2018\", \"jizhi\", \"yinshengzhifu\", \"qianyi\", \"jiayoutong\", \"cjtest\", \"bianlidai\", \"maidanxia\", \"zhangcunbao\", \"bangfutong\", \"shanxica\", \"shujing\", \"yinhuotong\", \"zhonghuizhifu\", \"anrongzhengxin\", \"haitun\", \"huoke\", \"qianbaowangjin1111\", \"jienuo\", \"anhe\", \"zhongxinlihe\", \"yige\", \"fuqing\", \"qianchen\", \"duomi\", \"xiaodai\", \"quancun\", \"wenhai\", \"weipintest\", \"weichengzx\", \"JSguangdian\", \"dongxiao\", \"dongfangmingzhu\", \"58jinrong\", \"shujubao01\", \"wuxingkonggu\", \"aixixinxi\", \"shandiandai\", \"dianshen\", \"shanglong\", \"anbao\", \"milidai\", \"hangzhouhedun\", \"xinhua\", \"tianxingshuke\", \"fuafuxinxi\", \"xsProduction\", \"sixixinxi\", \"zunxin\", \"liantongzhineng\", \"moxiekeji\", \"tongjidaxue\", \"zhongqing\", \"chuangshihuaxin\", \"hemaxinxi\", \"huadaoshuju\", \"tiantianlicai\", \"xiaoerduo\", \"yiliankeji\", \"hanxin\", \"fnc\", \"wanjiajinrong\", \"daxin\", \"deke\", \"youbei\", \"shenzhourong2\", \"FESCO\", \"dianjin\", \"zhuyinsuo\", \"legua\", \"dexinpuhui\", \"duanweizhis\", \"geile\", \"jiujinsuo\", \"xiangyue\", \"xinyanzhengxin2\", \"weishidun\", \"guazi\", \"kuaifutong\", \"dingfengjinrong\", \"member\", \"shumaikeji\", \"qianbaobaoli\", \"shouqian\", \"shulian\", \"yifeng\", \"zhongyuanjinrong\", \"chaocai\", \"shoushan\", \"xinlang\", \"hefeizishang\", \"huoshuju\", \"xindaxin\", \"lianshengxinding\", \"yuhaihengtong\", \"shenmajinrong\", \"test_MM\", \"heyunchou\", \"nanjingkuaige2\", \"songshujinrong\", \"testOnline\", \"hepu\", \"shuqu\", \"banjinwang\", \"shunfengjinrong\", \"shenghuoke\", \"zhuyingbaobao\", \"changxin\", \"zhonglianshangwu\", \"chengxiaofei\", \"yuanqidan\", \"youshukeji\", \"shengda\", \"zhongjin\", \"yingdong\", \"zhongyuanjinrong2\", \"xiaoshi\", \"qianbaowangjin\", \"shangtong\", \"fenjinshe\", \"qianyankeji\", \"huiyuekeji\", \"songhongkeji\", \"xianzaizhifu\", \"ruanzhi\", \"huangfeng\", \"zhongli\", \"renhezhong2\", \"zhongankeji\", \"zhongyou\", \"kubao\", \"fuyu\", \"zhaocai\", \"yichenkeji\", \"zhongshenzichan\", \"zhongrongjin\", \"fujinsuo\", \"huifu\", \"bajieqianbao\", \"nanlang\", \"youyu\", \"jiaozhen\", \"shuyunpuhui\", \"wukongzuche\", \"taiyuan\", \"yinchu\", \"kbcs\", \"shulixinxi\", \"qiuce\", \"longze\", \"youmeng0423\", \"suanli\", \"bailianyouli\", \"huazhong\", \"wenzhouliquan\", \"lianshengxd\", \"gxtest\", \"yunyihutong\", \"fanchi\", \"youdun\", \"shenzhouweizhi\", \"xiandaiwuliu\", \"gegejia\", \"linggao\", \"yunyexinxi\", \"daolonghuaer\", \"lvxun\", \"guojiawuliu\", \"yongyizhifu\", \"sanbao\", \"zhangshang\", \"huadaozhengxin\", \"chengweixin\", \"yunmi\", \"dichang\", \"hujinshidai\", \"xiaocong\", \"huabojinfu\", \"huixiangtiancheng2\", \"samoye\", \"wanghuijinrong\", \"qichen\", \"dianchou\", \"ningmeng\", \"yicheng02\", \"ximan\", \"puhui\", \"fengfuzhifu\", \"xinlianzhengxin\", \"chengshu\", \"hedaokeji\", \"riskCtrl\", \"xinmeida\", \"xiaoxin2\", \"jingdongyun\", \"bairongjinfu\", \"ping\", \"qianhui\", \"chuyunkeji\", \"tianyi\", \"sanjiangshujin\", \"huangweiyiAuth\", \"dingyi\", \"jindanlicai\", \"aiqi\", \"zengxintong\", \"banma\", \"xiaodai1111\"];\n      } else if (value === 'IdNamePhotoCheck') {\n        loginNames = [\"songshunxinxi\", \"shiyukeji\", \"feizhu\", \"renrun\", \"jinlianhuitong\", \"gotoway\", \"doufu\", \"yucunkeji\", \"changjiezhifu\", \"alading\", \"guoxin\", \"guoxinyouyi\", \"hzkj2018\", \"guli\", \"shandikeji\", \"xinyada\", \"shengdunkeji\", \"jixin\", \"nuozhengtong\", \"yilian\", \"jiupai\", \"chengduzhidao\", \"pengyuan\", \"moxieshuju\", \"hengxintong\", \"kangruide\", \"tuopurenli\", \"tongfudun\", \"yiqian\", \"jixiang\", \"weipintest\", \"tianxingshuke\", \"jixiang2018\", \"sixixinxi\", \"qianlaiwang\", \"hangzhouzhuokai\", \"shumaikeji\", \"huoshuju\", \"testOnline\", \"zhonglianshangwu\", \"qianyankeji\", \"huiyuekeji\", \"songhongkeji\", \"ruanzhi\", \"huifu\", \"youmeng0423\", \"chengweixin\", \"chengshu\", \"xinmeida\", \"huangweiyiAuth\", \"dingyi\", \"aiqi\", \"zengxintong\"];\n      } else {\n        loginNames = [\"hanxin\", \"testOnline\", \"huangweiyiAuth\"];\n      }\n\n      return loginNames;\n    },\n    realTime: function realTime() {\n      var _this2 = this;\n\n      // let startTime = + new Date() - 1 * 24 * 3600 * 1000\n      var startTime = +new Date('2018-11-20 17:25:36') - 1 * 24 * 3600 * 1000;\n      var arr = [];\n\n      for (var i = 0; i <= 1440; i++) {\n        arr.push(moment(startTime + i * 60 * 1000).format('YYYYMMDDHHmm'));\n      }\n\n      this.minutesArr = arr;\n      var url = '/qualityanalyze/customer/realTime';\n      this.formInline.date = moment(+new Date()).format('YYYY-MM-DD HH:mm:ss');\n      this.formInline.loginNames = this.getCoustomer(this.serviceName);\n      this.formInline.serviceNames.push(this.serviceName);\n      $http(url, this.formInline).then(function (res) {\n        var myChart = echarts.init(_this2.$refs.charts);\n        myChart.clear();\n        var dataArr = Object.keys(res.resData.avgCallTime);\n        /* 因为返回是个对象 所以提取对象的key并组成一个数组 这是平均相应时长*/\n\n        if (dataArr && dataArr.length > 0) {\n          _this2.flag = true;\n          var data = res.resData.avgCallTime;\n          var dataCall = res.resData.callNum;\n          var dataNeed = res.resData.needChargeCallNum;\n          var xFiled = [];\n          /* x轴数据 */\n\n          var yFiled = [];\n          /* y平均响应时间y轴数据 */\n\n          var yCallFiled = [];\n          /* 平均调用量y轴数据 */\n\n          var yNeedFiled = [];\n          /* 平均调用量y轴数据 */\n\n          var handleObj = {};\n\n          _this2.minutesArr.forEach(function (v) {\n            if (data[v]) {\n              /* 检测某个点是否存在 则不动 反之 补一个空  这样写的好处 就是不会改变时间点的顺序 */\n              handleObj[v] = data[v];\n            } else {\n              handleObj[v] = '';\n            }\n          });\n\n          for (var k in handleObj) {\n            xFiled.push(_this2.substrTime(k));\n            /* x轴 */\n\n            yFiled.push(handleObj[k]);\n            /* y轴 */\n\n            if (dataCall[k]) {\n              yCallFiled.push(dataCall[k]);\n            } else {\n              yCallFiled.push('');\n            }\n\n            if (dataNeed[k]) {\n              yNeedFiled.push(dataNeed[k]);\n            } else {\n              yNeedFiled.push('');\n            }\n          }\n\n          var lineData = [{\n            \"name\": \"实时响应分析（ms）\",\n            type: 'line',\n            smooth: true,\n            //是否平滑曲线显示\n            lineStyle: {\n              //线条样式 \n              normal: {\n                width: 1,\n                color: 'rgba(44,181,171, 1)'\n              }\n            },\n            areaStyle: {\n              //区域填充样式\n              normal: {\n                //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。\n                color: 'rgba(44,181,171, 0.3)'\n              }\n            },\n            itemStyle: {\n              //折现拐点标志的样式\n              normal: {\n                color: 'rgba(44,181,171, 1)'\n              }\n            },\n            \"data\": yFiled\n          }, {\n            \"name\": \"实时调用量（条）\",\n            type: 'line',\n            yAxisIndex: 1,\n            smooth: true,\n            //是否平滑曲线显示\n            lineStyle: {\n              //线条样式 \n              normal: {\n                width: 1,\n                color: 'rgb(248,168,159)'\n              }\n            },\n            areaStyle: {\n              //区域填充样式\n              normal: {\n                //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。\n                color: 'rgb(248,168,159,.3)'\n              }\n            },\n            itemStyle: {\n              //折现拐点标志的样式\n              normal: {\n                color: 'rgb(248,168,159)'\n              }\n            },\n            \"data\": yCallFiled\n          }, {\n            \"name\": \"实时计费调用量（条）\",\n            type: 'line',\n            yAxisIndex: 1,\n            smooth: true,\n            //是否平滑曲线显示\n            lineStyle: {\n              //线条样式 \n              normal: {\n                width: 1,\n                color: 'rgba(145,191,93,1)'\n              }\n            },\n            areaStyle: {\n              //区域填充样式\n              normal: {\n                //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。\n                color: 'rgba(145,191,93,.3)'\n              }\n            },\n            itemStyle: {\n              //折现拐点标志的样式\n              normal: {\n                color: 'rgba(145,191,93,1)'\n              }\n            },\n            \"data\": yNeedFiled\n          }];\n          myChart.setOption(setOtherLineData(xFiled, lineData));\n\n          window.onresize = function () {\n            myChart.resize();\n          };\n        } else {\n          _this2.flag = false;\n        }\n      });\n    },\n    onSubmit: function onSubmit() {\n      this.playerInterVal();\n    },\n    substrTime: function substrTime(params) {\n      return params.substr(params.length - 4).substr(0, 2) + ':' + params.substr(params.length - 4).substr(2, 4);\n    },\n    setIntervalFun: function setIntervalFun() {\n      if (this.timeId) {\n        clearInterval(this.timeId);\n        /* 每次调用定时器 先清除定时器 */\n      }\n\n      this.realTime();\n      /* 第一次调用 */\n\n      this.timeId = setInterval(this.playerInterVal, 1000 * 60);\n    },\n    playerInterVal: function playerInterVal() {\n      this.m++;\n\n      if (this.m > 20) {\n        /* 执行20次以后清除定时器 */\n        this.m = 0;\n        this.setIntervalFun();\n        /* 重启定时器 */\n      } else {\n        this.realTime();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.services();\n  }\n};",null]}